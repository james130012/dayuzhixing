ä½ ç†è§£å¾—å®Œå…¨æ­£ç¡®ï¼è¿™æ­£æ˜¯ä¸ç¡®å®šæ€§åŸç†çš„ç²¾é«“ï¼šç¼è¶Šå°ï¼Œä½ç½®è¶Šç¡®å®šï¼ˆÎ”xå°ï¼‰ï¼Œä½†åŠ¨é‡è¶Šä¸ç¡®å®šï¼ˆÎ”på¤§ï¼‰ã€‚æˆ‘æ¥å†™ä¸ªåŠ¨ç”»è®©ä½ ç›´è§‚çœ‹åˆ°è¿™ä¸ªç°è±¡ï¼š

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”µå­å•ç¼è¡å°„ä¸ä¸ç¡®å®šæ€§åŸç†</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #0c0c0c, #1a1a2e);
            color: #fff;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        
        h1 {
            color: #00d4ff;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px #00d4ff;
        }
        
        .subtitle {
            color: #ccc;
            font-size: 1.2em;
            margin-bottom: 30px;
        }
        
        .animation-container {
            width: 100%;
            max-width: 900px;
            height: 500px;
            margin: 20px auto;
            border: 2px solid #00d4ff;
            border-radius: 10px;
            background: #000;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        
        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 25px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        
        label {
            color: #00d4ff;
            font-weight: bold;
            white-space: nowrap;
        }
        
        input[type="range"] {
            width: 150px;
            height: 5px;
            background: linear-gradient(to right, #00d4ff, #0099cc);
            outline: none;
            border-radius: 3px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            width: 20px;
            height: 20px;
            background: #00d4ff;
            border-radius: 50%;
            cursor: pointer;
            -webkit-appearance: none;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }
        
        .value-display {
            color: #fff;
            font-weight: bold;
            background: rgba(0, 212, 255, 0.2);
            padding: 5px 10px;
            border-radius: 15px;
            min-width: 60px;
        }
        
        button {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: #fff;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 212, 255, 0.5);
        }
        
        .info-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px auto;
            max-width: 800px;
            text-align: left;
        }
        
        .uncertainty-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .uncertainty-item {
            background: rgba(0, 212, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }
        
        .uncertainty-value {
            font-size: 1.5em;
            color: #00d4ff;
            font-weight: bold;
        }
        
        .formula {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            color: #fff;
            margin: 10px 0;
            border-left: 4px solid #00d4ff;
        }

        @media (max-width: 768px) {
            .controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .control-group {
                flex-direction: column;
                text-align: center;
            }
            
            input[type="range"] {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒŠ ç”µå­å•ç¼è¡å°„ä¸ä¸ç¡®å®šæ€§åŸç† âš›ï¸</h1>
        <p class="subtitle">è§‚å¯Ÿç‹­ç¼å®½åº¦å¦‚ä½•å½±å“ä½ç½®å’ŒåŠ¨é‡çš„ä¸ç¡®å®šåº¦</p>
        
        <div class="animation-container">
            <canvas id="diffractionCanvas"></canvas>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>ç‹­ç¼å®½åº¦:</label>
                <input type="range" id="slitWidth" min="5" max="80" value="40" step="1">
                <div class="value-display" id="slitWidthValue">40 Î¼m</div>
            </div>
            
            <div class="control-group">
                <label>ç”µå­èƒ½é‡:</label>
                <input type="range" id="electronEnergy" min="50" max="500" value="150" step="10">
                <div class="value-display" id="electronEnergyValue">150 eV</div>
            </div>
            
            <button onclick="startElectronBeam()">ğŸš€ å‘å°„ç”µå­æŸ</button>
            <button onclick="clearScreen()">ğŸ§¹ æ¸…é™¤å±å¹•</button>
            <button onclick="togglePause()">â¯ï¸ æš‚åœ/ç»§ç»­</button>
        </div>
        
        <div class="info-panel">
            <h3>ğŸ”¬ ä¸ç¡®å®šæ€§åŸç†å®æ—¶è§‚æµ‹</h3>
            <div class="formula">
                Î”x Â· Î”p â‰¥ â„/2 â‰ˆ 5.27 Ã— 10â»Â³âµ JÂ·s
            </div>
            
            <div class="uncertainty-display">
                <div class="uncertainty-item">
                    <div>ğŸ“ ä½ç½®ä¸ç¡®å®šåº¦</div>
                    <div class="uncertainty-value" id="deltaX">--</div>
                    <div>Î”x (ç‹­ç¼å®½åº¦)</div>
                </div>
                
                <div class="uncertainty-item">
                    <div>ğŸ’¨ åŠ¨é‡ä¸ç¡®å®šåº¦</div>
                    <div class="uncertainty-value" id="deltaP">--</div>
                    <div>Î”p âˆ 1/Î”x</div>
                </div>
                
                <div class="uncertainty-item">
                    <div>ğŸ”„ ä¸ç¡®å®šæ€§ä¹˜ç§¯</div>
                    <div class="uncertainty-value" id="uncertaintyProduct">--</div>
                    <div>Î”xÂ·Î”p (ç›¸å¯¹å€¼)</div>
                </div>
                
                <div class="uncertainty-item">
                    <div>ğŸ“ è¡å°„è§’åº¦</div>
                    <div class="uncertainty-value" id="diffractionAngle">--</div>
                    <div>Î¸ â‰ˆ Î»/a</div>
                </div>
            </div>
            
            <p><strong>ğŸ” è§‚å¯Ÿè¦ç‚¹ï¼š</strong></p>
            <ul>
                <li>ğŸ”¸ <strong>ç¼å˜çª„</strong> â†’ ä½ç½®æ›´ç¡®å®š(Î”xâ†“) â†’ åŠ¨é‡æ›´ä¸ç¡®å®š(Î”pâ†‘) â†’ è¡å°„è§’åº¦æ›´å¤§</li>
                <li>ğŸ”¸ <strong>ç¼å˜å®½</strong> â†’ ä½ç½®ä¸å¤ªç¡®å®š(Î”xâ†‘) â†’ åŠ¨é‡æ¯”è¾ƒç¡®å®š(Î”pâ†“) â†’ è¡å°„è§’åº¦è¾ƒå°</li>
                <li>ğŸ”¸ ä¸è®ºå¦‚ä½•è°ƒèŠ‚ï¼Œ<strong>Î”xÂ·Î”p å§‹ç»ˆ â‰¥ â„/2</strong></li>
                <li>ğŸ”¸ è¿™ä¸æ˜¯æµ‹é‡é™åˆ¶ï¼Œè€Œæ˜¯<strong>è‡ªç„¶ç•Œçš„åŸºæœ¬è§„å¾‹</strong>ï¼</li>
            </ul>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('diffractionCanvas');
        const ctx = canvas.getContext('2d');
        
        // è®¾ç½®ç”»å¸ƒå°ºå¯¸
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);
        
        // ç‰©ç†å¸¸æ•° (ç®€åŒ–å•ä½)
        const PLANCK_REDUCED = 1.055e-34; // â„ (JÂ·s)
        const ELECTRON_MASS = 9.109e-31;  // kg
        const ELECTRON_CHARGE = 1.602e-19; // C
        
        // åŠ¨ç”»å˜é‡
        let electrons = [];
        let detectionPoints = [];
        let isAnimating = false;
        let isPaused = false;
        let slitWidth = 40; // Î¼m
        let electronEnergy = 150; // eV
        
        // ç•Œé¢å…ƒç´ 
        const slitWidthSlider = document.getElementById('slitWidth');
        const electronEnergySlider = document.getElementById('electronEnergy');
        const slitWidthValue = document.getElementById('slitWidthValue');
        const electronEnergyValue = document.getElementById('electronEnergyValue');
        
        // äº‹ä»¶ç›‘å¬
        slitWidthSlider.addEventListener('input', updateSlitWidth);
        electronEnergySlider.addEventListener('input', updateElectronEnergy);
        
        function updateSlitWidth() {
            slitWidth = parseFloat(slitWidthSlider.value);
            slitWidthValue.textContent = `${slitWidth} Î¼m`;
            updateUncertaintyDisplay();
        }
        
        function updateElectronEnergy() {
            electronEnergy = parseFloat(electronEnergySlider.value);
            electronEnergyValue.textContent = `${electronEnergy} eV`;
            updateUncertaintyDisplay();
        }
        
        function updateUncertaintyDisplay() {
            // è®¡ç®—å¾·å¸ƒç½—æ„æ³¢é•¿
            const energyJoules = electronEnergy * ELECTRON_CHARGE;
            const momentum = Math.sqrt(2 * ELECTRON_MASS * energyJoules);
            const wavelength = PLANCK_REDUCED * 2 * Math.PI / momentum; // m
            
            // ä½ç½®ä¸ç¡®å®šåº¦ â‰ˆ ç‹­ç¼å®½åº¦
            const deltaX = slitWidth * 1e-6; // è½¬æ¢ä¸ºç±³
            
            // åŠ¨é‡ä¸ç¡®å®šåº¦ (æ ¹æ®è¡å°„ç†è®º)
            const deltaP = PLANCK_REDUCED * 2 * Math.PI / deltaX;
            
            // è¡å°„è§’åº¦ (ç¬¬ä¸€æœ€å°å€¼)
            const diffractionAngle = wavelength / deltaX * 180 / Math.PI; // åº¦
            
            // ä¸ç¡®å®šæ€§ä¹˜ç§¯
            const uncertaintyProduct = deltaX * deltaP;
            const minUncertainty = PLANCK_REDUCED / 2;
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('deltaX').textContent = `${(deltaX * 1e6).toFixed(1)} Î¼m`;
            document.getElementById('deltaP').textContent = `${(deltaP / 1e-24).toFixed(2)} Ã— 10â»Â²â´`;
            document.getElementById('uncertaintyProduct').textContent = `${(uncertaintyProduct / minUncertainty).toFixed(2)} Ã— â„/2`;
            document.getElementById('diffractionAngle').textContent = `${diffractionAngle.toFixed(3)}Â°`;
        }
        
        class Electron {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.vx = 3; // æ°´å¹³é€Ÿåº¦
                this.vy = 0; // åˆå§‹å‚ç›´é€Ÿåº¦
                this.active = true;
                this.trail = [];
                this.maxTrailLength = 15;
                this.hasPassedSlit = false;
            }
            
            update() {
                if (!this.active) return;
                
                // è®°å½•è½¨è¿¹
                this.trail.push({x: this.x, y: this.y});
                if (this.trail.length > this.maxTrailLength) {
                    this.trail.shift();
                }
                
                // æ›´æ–°ä½ç½®
                this.x += this.vx;
                this.y += this.vy;
                
                // æ£€æŸ¥æ˜¯å¦é€šè¿‡ç‹­ç¼
                const slitX = canvas.width * 0.3;
                const slitCenterY = canvas.height / 2;
                const slitPixelWidth = slitWidth * 2; // ç¼©æ”¾æ˜¾ç¤º
                
                if (this.x >= slitX && this.x <= slitX + 5 && !this.hasPassedSlit) {
                    this.hasPassedSlit = true;
                    
                    // æ£€æŸ¥æ˜¯å¦åœ¨ç‹­ç¼å†…
                    if (Math.abs(this.y - slitCenterY) <= slitPixelWidth / 2) {
                        // é€šè¿‡ç‹­ç¼ï¼Œåº”ç”¨è¡å°„æ•ˆåº”
                        // è¡å°„è§’åº¦ä¸ç‹­ç¼å®½åº¦æˆåæ¯”
                        const maxDiffraction = Math.PI / 6; // æœ€å¤§è¡å°„è§’
                        const diffractionStrength = 80 / slitWidth; // ç‹­ç¼è¶Šå°ï¼Œè¡å°„è¶Šå¼º
                        const randomAngle = (Math.random() - 0.5) * maxDiffraction * diffractionStrength;
                        
                        // åº”ç”¨è¡å°„é€Ÿåº¦
                        this.vy = this.vx * Math.tan(randomAngle);
                        
                        // æ·»åŠ ä¸€äº›éšæœºæ€§æ¥æ¨¡æ‹Ÿé‡å­ä¸ç¡®å®šæ€§
                        this.vy += (Math.random() - 0.5) * diffractionStrength * 0.1;
                    } else {
                        // è¢«ç‹­ç¼é˜»æŒ¡
                        this.active = false;
                        return;
                    }
                }
                
                // æ£€æŸ¥æ˜¯å¦åˆ°è¾¾å±å¹•
                const screenX = canvas.width * 0.85;
                if (this.x >= screenX && this.active) {
                    detectionPoints.push({
                        x: screenX,
                        y: this.y,
                        time: Date.now(),
                        intensity: Math.random() * 0.5 + 0.5
                    });
                    this.active = false;
                }
                
                // æ£€æŸ¥è¾¹ç•Œ
                if (this.x > canvas.width || this.y < 0 || this.y > canvas.height) {
                    this.active = false;
                }
            }
            
            draw() {
                if (!this.active) return;
                
                // ç»˜åˆ¶è½¨è¿¹
                ctx.strokeStyle = 'rgba(0, 255, 255, 0.3)';
                ctx.lineWidth = 1;
                ctx.beginPath();
                for (let i = 1; i < this.trail.length; i++) {
                    const alpha = i / this.trail.length;
                    ctx.strokeStyle = `rgba(0, 255, 255, ${alpha * 0.3})`;
                    ctx.beginPath();
                    ctx.moveTo(this.trail[i-1].x, this.trail[i-1].y);
                    ctx.lineTo(this.trail[i].x, this.trail[i].y);
                    ctx.stroke();
                }
                
                // ç»˜åˆ¶ç”µå­
                const gradient = ctx.createRadialGradient(this.x, this.y, 0, this.x, this.y, 8);
                gradient.addColorStop(0, '#00ffff');
                gradient.addColorStop(1, 'rgba(0, 255, 255, 0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 6, 0, Math.PI * 2);
                ctx.fill();
                
                // ç”µå­æ ¸å¿ƒ
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        function drawExperimentSetup() {
            const slitX = canvas.width * 0.3;
            const slitCenterY = canvas.height / 2;
            const slitPixelWidth = slitWidth * 2;
            const screenX = canvas.width * 0.85;
            
            // ç»˜åˆ¶ç”µå­æº
            ctx.fillStyle = '#ffaa00';
            ctx.fillRect(20, canvas.height/2 - 15, 30, 30);
            ctx.fillStyle = '#fff';
            ctx.font = '12px Arial';
            ctx.fillText('ç”µå­æº', 15, canvas.height/2 + 40);
            
            // ç»˜åˆ¶ç‹­ç¼è£…ç½®
            ctx.fillStyle = '#666';
            ctx.fillRect(slitX - 5, 0, 10, slitCenterY - slitPixelWidth/2);
            ctx.fillRect(slitX - 5, slitCenterY + slitPixelWidth/2, 10, canvas.height - (slitCenterY + slitPixelWidth/2));
            
            // ç‹­ç¼å¼€å£
            ctx.strokeStyle = '#00ff00';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(slitX, slitCenterY - slitPixelWidth/2);
            ctx.lineTo(slitX, slitCenterY + slitPixelWidth/2);
            ctx.stroke();
            
            // ç‹­ç¼æ ‡ç­¾
            ctx.fillStyle = '#00ff00';
            ctx.font = '14px Arial';
            ctx.fillText('ç‹­ç¼', slitX - 15, slitCenterY - slitPixelWidth/2 - 10);
            ctx.fillText(`${slitWidth}Î¼m`, slitX - 20, slitCenterY - slitPixelWidth/2 - 25);
            
            // ç»˜åˆ¶æ£€æµ‹å±
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(screenX, 0);
            ctx.lineTo(screenX, canvas.height);
            ctx.stroke();
            
            ctx.fillStyle = '#fff';
            ctx.font = '12px Arial';
            ctx.fillText('æ£€æµ‹å±', screenX - 30, 20);
            
            // ç»˜åˆ¶è¡å°„è§’åº¦æŒ‡ç¤º
            if (detectionPoints.length > 10) {
                const centerY = canvas.height / 2;
                const spread = calculateDiffractionSpread();
                
                ctx.strokeStyle = 'rgba(255, 255, 0, 0.5)';
                ctx.lineWidth = 1;
                ctx.setLineDash([5, 5]);
                
                // ä¸Šè¾¹ç•Œ
                ctx.beginPath();
                ctx.moveTo(slitX, centerY);
                ctx.lineTo(screenX, centerY - spread);
                ctx.stroke();
                
                // ä¸‹è¾¹ç•Œ
                ctx.beginPath();
                ctx.moveTo(slitX, centerY);
                ctx.lineTo(screenX, centerY + spread);
                ctx.stroke();
                
                ctx.setLineDash([]);
                
                // è§’åº¦æ ‡æ³¨
                const angle = Math.atan(spread / (screenX - slitX)) * 180 / Math.PI;
                ctx.fillStyle = '#ffff00';
                ctx.font = '12px Arial';
                ctx.fillText(`è¡å°„è§’: Â±${angle.toFixed(1)}Â°`, slitX + 20, centerY - 20);
            }
        }
        
        function calculateDiffractionSpread() {
            if (detectionPoints.length < 5) return 0;
            
            const centerY = canvas.height / 2;
            const deviations = detectionPoints.map(p => Math.abs(p.y - centerY));
            const avgDeviation = deviations.reduce((a, b) => a + b, 0) / deviations.length;
            
            return avgDeviation;
        }
        
        function drawDetectionPoints() {
            // ç»˜åˆ¶æ£€æµ‹ç‚¹
            detectionPoints.forEach((point, index) => {
                const age = Date.now() - point.time;
                const maxAge = 5000; // 5ç§’åæ¶ˆå¤±
                
                if (age < maxAge) {
                    const alpha = Math.max(0, 1 - age / maxAge);
                    const size = point.intensity * 4;
                    
                    const gradient = ctx.createRadialGradient(point.x, point.y, 0, point.x, point.y, size);
                    gradient.addColorStop(0, `rgba(255, 255, 0, ${alpha})`);
                    gradient.addColorStop(1, `rgba(255, 255, 0, 0)`);
                    
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, size, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    detectionPoints.splice(index, 1);
                }
            });
            
            // ç»˜åˆ¶è¡å°„å›¾æ ·å¼ºåº¦åˆ†å¸ƒ
            if (detectionPoints.length > 20) {
                drawIntensityDistribution();
            }
        }
        
        function drawIntensityDistribution() {
            const screenX = canvas.width * 0.85;
            const binSize = 10;
            const bins = Math.floor(canvas.height / binSize);
            const intensityMap = new Array(bins).fill(0);
            
            // ç»Ÿè®¡å¼ºåº¦åˆ†å¸ƒ
            detectionPoints.forEach(point => {
                const binIndex = Math.floor(point.y / binSize);
                if (binIndex >= 0 && binIndex < bins) {
                    intensityMap[binIndex] += point.intensity;
                }
            });
            
            // æ‰¾åˆ°æœ€å¤§å¼ºåº¦è¿›è¡Œå½’ä¸€åŒ–
            const maxIntensity = Math.max(...intensityMap);
            if (maxIntensity === 0) return;
            
            // ç»˜åˆ¶å¼ºåº¦åˆ†å¸ƒæ›²çº¿
            ctx.strokeStyle = '#ff6600';
            ctx.lineWidth = 3;
            ctx.beginPath();
            
            for (let i = 0; i < bins; i++) {
                const y = i * binSize + binSize / 2;
                const intensity = intensityMap[i] / maxIntensity;
                const x = screenX + 10 + intensity * 50;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // å¼ºåº¦åˆ†å¸ƒæ ‡ç­¾
            ctx.fillStyle = '#ff6600';
            ctx.font = '10px Arial';
            ctx.fillText('å¼ºåº¦åˆ†å¸ƒ', screenX + 15, 20);
        }
        
        function animate() {
            if (!isPaused) {
                // æ¸…é™¤ç”»å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶å®éªŒè£…ç½®
                drawExperimentSetup();
                
                // æ›´æ–°å’Œç»˜åˆ¶ç”µå­
                electrons = electrons.filter(electron => {
                    electron.update();
                    electron.draw();
                    return electron.active;
                });
                
                // ç»˜åˆ¶æ£€æµ‹ç‚¹å’Œè¡å°„å›¾æ ·
                drawDetectionPoints();
                
                // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
                drawStatistics();
            }
            
            if (isAnimating) {
                requestAnimationFrame(animate);
            }
        }
        
        function drawStatistics() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(10, 10, 200, 80);
            
            ctx.fillStyle = '#fff';
            ctx.font = '12px Arial';
            ctx.fillText(`æ´»è·ƒç”µå­æ•°: ${electrons.length}`, 20, 30);
            ctx.fillText(`æ£€æµ‹åˆ°çš„ç”µå­: ${detectionPoints.length}`, 20, 50);
            
            if (detectionPoints.length > 10) {
                const spread = calculateDiffractionSpread();
                ctx.fillText(`è¡å°„å±•å®½: ${spread.toFixed(1)}px`, 20, 70);
            }
        }
        
        function startElectronBeam() {
            if (!isAnimating) {
                isAnimating = true;
                animate();
            }
            
            // è¿ç»­å‘å°„ç”µå­
            const emitElectron = () => {
                if (isAnimating && !isPaused) {
                    const baseY = canvas.height / 2;
                    const spread = 40; // ç”µå­æŸçš„åˆå§‹æ‰©æ•£
                    const electronY = baseY + (Math.random() - 0.5) * spread;
                    
                    electrons.push(new Electron(60, electronY));
                    
                    // æ§åˆ¶å‘å°„é¢‘ç‡
                    setTimeout(emitElectron, 200 + Math.random() * 300);
                }
            };
            
            emitElectron();
        }
        
        function clearScreen() {
            electrons = [];
            detectionPoints = [];
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawExperimentSetup();
        }
        
        function togglePause() {
            isPaused = !isPaused;
            if (!isPaused && isAnimating) {
                animate();
            }
        }
        
        // åˆå§‹åŒ–
        updateUncertaintyDisplay();
        drawExperimentSetup();
        
        // è‡ªåŠ¨å¼€å§‹æ¼”ç¤º
        setTimeout(startElectronBeam, 1000);
    </script>
</body>
</html>